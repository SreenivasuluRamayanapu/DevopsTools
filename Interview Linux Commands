Shell Scripting Interview Questions:
1. Write scripts for monitoring, log processing, metrics collection and data visualization.
Q. How to delete log files which are older than x Days 
A. find LogfailsDirectoryPath -mtime +7 -exec rm {} \;
Q. How to check port numbers of all the services running on a server?
A. netstat -tlpn | grep httpd (to check port no of httpd service)
Q. Sort Processes by Memory Usage
A. ps aux | sort -rnk 4:
Q. Sort Processes by CPU Usage
A. ps aux | sort -nk 3:
Q. 


how to give execute permission to a file?
chmod +x deploy


~/.ssh/authorized_keys

//Copy your ssh public key to a server from a machine that doesn't have ssh-copy-id
If you use Mac OS X or some other *nix variant that doesn't come with ssh-copy-id, this one-liner will allow you to add your public key to a remote machine so you can subsequently ssh to that machine without a password
cat ~/.ssh/id_rsa.pub | ssh user@machine "mkdir ~/.ssh; cat >> ~/.ssh/authorized_keys"


//Copy ssh keys to user@host to enable password-less ssh logins
cat ~/.ssh/id_rsa.pub | ssh user@host 'cat >> ~/.ssh/authorized_keys'


//Copy your SSH public key on a remote machine for passwordless login - the easy way
  or
  Copy ssh keys to user@host to enable password-less ssh logins.
ssh-copy-id username@hostname



copy public key
If the username on the remote host is the same as on the local machine you can omit the username.
ssh-copy-id host

cat ~/.ssh/id_rsa.pub | ssh <user>@<hostname> 'cat >> .ssh/authorized_keys && echo "Key copied"'
cat ~/.ssh/id_rsa.pub | ssh <user>@<hostname> 'umask 0077; mkdir -p .ssh; cat >> .ssh/authorized_keys && echo "Key copied"'

ssh-copy-id user@hostname.example.com

node {
  sshagent (credentials: ['deploy-dev']) {
    sh 'ssh -o StrictHostKeyChecking=no -l user@192.168.1.106/hostname 
  }
}
or
stage ('Deploy') {
    steps{
        sshagent(credentials : ['use-the-id-from-credential-generated-by-jenkins']) {
            sh 'ssh -o StrictHostKeyChecking=no user@hostname.com uptime'
            sh 'ssh -v user@hostname.com'
            sh 'scp ./source/filename user@hostname.com:/remotehost/target'
        }
    }
}








Jenkins Interview Questions:
1. what is Continuous Integration, Continuous Delivery and Continuous Deployment?
2. How do you Implementing CI/CD pipeline throgh jenkins
      1.via build pipeline(upstream and downstream jobs)
      2.via pipeline script
3. How do you Implement automated build in Jenkins
4. How do you Implement automated deployment
5. master/slave architecture
6. parameterized builds
7. difference between Matrix based security and Role based autherization strategy? How did you implement security for Jenkins?
8. What are the Major issues you have faced in Jenkins?


Git Interview Questions?
1. Explain Branching Strategy in your organisation?
2. 


Finding Files with Names, Find Files and Directories Based on Date and Time,
Find Files and Directories Based on Size, Find Files Based on their Permissions,


find command attributes
1. path
2. -type f or -type d
3. -name fileName or directoryName  //techmint.php or *.php
4. -exec rm -f {} \;
5. -mtime 
6. -size



• mtime —the time that the contents of a file were last modified 
• atime—the time that a file was read or accessed 
• ctime—the time that a file’s status was changed
Modification time: The last time when the file’s content was modified.
Access time: The last time when the file was read.
Change time: The last time when the file (either its content or metadata, such as permissions) were modified.

-mtime 2: The file was modified 2 days ago (i.e. in the last 48 to 72 hours).
-mtime -2: The file was modified less than 2 days ago (i.e. within the last 48 hours).
-mtime +2: The file was modified more than 2 days ago (i.e. 3 or more days, which means 72 hours or later).




find /usr/share  or find .
find /usr -name NEWS.txt - Finding items by their name
find /usr -type f -name '*.txt'  - Searching for files or directories
find /usr -type f -mtime 2   // find files in /usr which were modified two days ago           // Searching for files based on date and time
find /usr -type f -mtime 2 -amin 5      //find files modified 2 days ago and accessed 5 minutes ago
find /usr -type f -mtime +50 -mtime -100   //find files modified between 50 and 100 days ago  



Jenkins requires us to have the private ssh key for the server we want to connect with Jenkins server i.e remote server
https://linuxtechlab.com/how-to-easily-add-ssh-credentials-on-jenkins-server/





SSH is typically used to log into a remote machine and execute commands 
It can transfer files using SSH file transfer (SFTP) or secure copy (SCP) protocols.

ssh client is a software that connects windows to Linux server.
Putty is a ssh client, we need to install putty in our windows server  to connect remote linux server, It uses the network protocols like ssh, telnet, rlogin 

To make a connection from
Windows/Linux    -> Linux        ssh connection
If it is windows -> Linus        ssh connection using ssh client(putty)
windows        -> Windows        RDP

1.WinScp
File Transfer from Windows to any server i.e windows/Linux(local server to remote server),it uses SFTP,Scp,FTP protocols to transfer
data. For this you must install WinScp in your local windows server.
2.Scp
The SCP is a network protocol, securely transferring files between a local host and a remote host or between two remote hosts.SCP uses
Secure Shell (SSH) for data transfer. first we need ssh connection should be establish and then you can run the scp command.
ssh  username@serverIP
scp  <options>  sourcefilepath  destination
ex: scp  /root/file.text   username@ServerIP:/home/user


publish over ssh plugin:
https://nozaki.me/roller/kyle/entry/articles-jenkins-sshdeploy
http://julianhigman.com/blog/2012/02/25/using-jenkins-to-run-remote-deployment-scripts-over-ssh/comment-page-1/
notice the difference
in Add build step
   send files or execute commands over ssh
in post build actions
   send build artifacts over ssh




Redirecting and Rewriting urls in apache webserver:
https://dzone.com/articles/running-tomcat-behind-apache***

You will frequently need to redirect one request location to another, and there are a variety of ways to do this.

Navigate to the conf folder and open httpd.conf file.
Make the following configurations in the < VirtualHost >  block and Restart your Apache server:
<VirtualHost *:80>
   ServerAdmin webmaster@domain.com
   DocumentRoot /var/www/webroot/ROOT
   ServerName website.jelastic.com
   ServerAlias *

   RewriteEngine On

   RewriteRule ^/application1/(.*) http://env-tomcat.jelastic.com/app1/ [P]
   ProxyPassReverse /application1/ http://env-tomcat.jelastic.com/app1/

   RewriteRule ^/application2/(.*) http://second-tomcat.jelastic.com/app2/ [P]
   ProxyPassReverse /application2/ http://second-tomcat.jelastic.com/app2/

   RewriteLog "/var/log/httpd/rewrite.log"

   ErrorLog logs/dummy-host.jelastic.com-error_log
   CustomLog logs/dummy-host.jelastic.com-access_log common
</VirtualHost>



The Redirect directive does a simple redirection from one location to another.
Redirect /one.html /another.html
Redirect /something/here.html http://elsewhere.com/there.html

RewriteEngine On
RewriteRule ^blog/?$ index.php?page=blog [L]
RewriteRule ^about/?$ index.php?page=about [L]
RewriteRule ^portfolio/?$ index.php?page=portfolio [L]
#RewriteRule ^.*$ index.php?page=blog [L]


In post steps
execute shell script on remote host using ssh
 ssh site  - username@serverip
 command




/var/log/httpd/access_log
/var/log/httpd/error_log


task1:

Change Web server configuration to 
a. Remove redirect for all quicksilver requests to quicksilver1.
b. Change Proxy pass rule to point quicksilver to LB on which depolyment will be done.
c. Restart Web services


Tasks:
Temp Files older then 3 days has been cleared.



how to enable the IIS for windows
start
Control panel
programs
Turn windows feature on / off
Check the IIS services (4th and 5th checkbox)
ok
restart the system







https://www.sumologic.com/insight/create-pipeline-with-aws-codepipeline/
The AWS CodePipeline Plugin for Jenkins
https://wiki.jenkins.io/display/JENKINS/AWS+CodePipeline+Plugin
https://dzone.com/articles/create-a-pipeline-using-the-aws-codepipeline-conso

AWS CodePipeline:
CodePipeline automates the build, test, and deploy phases of your release process every time there
is a code change, based on the release model you define.This enables you to rapidly and reliably deliver features and updates. 

You can easily integrate AWS CodePipeline with third-party services such as GitHub or with your own custom plugin.


1.pipeline name
2.source provider  // setting the source code for the pipeline
  In this step we need to tell AWS how are we managing our code. There are a few options available
  Amazon S3        // In order to use S3 as the source, you’ll need to provide a bucket name for an S3 bucket which has versioning enabled.
  AWS CodeCommit   // 
  GitHub 
3.Build provider
  Defining the Build Process for Your Pipeline. AWS offers three options for build providers:
  AWS CodeBuild
  Jenkins
  Solano CI
4.Deploying the Build with CodePipeline      //deployment to an environment for testing and/or production use
  AWS CodePipeline offers three options to do this—or you can select No Deployment if you want CodePipeline to only build your project. Those three deployment options are:
  AWS Elastic BeanStack
  AWS CodeDeploy
  AWS CloudFormation

AWS Code Deploy FAQ'S
https://aws.amazon.com/codedeploy/faqs/
AWS code Deploy tutorial:
http://www.tothenew.com/blog/aws-code-deploy-a-sample-walkthrough/
For picture: https://docs.aws.amazon.com/codepipeline/latest/userguide/welcome.html
https://docs.aws.amazon.com/codepipeline/latest/userguide/welcome.html




/etc/httpd/conf/httpd.conf
The first item to change is the Listen statement, which defines the IP address and port on which
Apache is to listen for page requests. Right now, you just need to make this website available to 
the local machine, so use the localhost address. The line should look like this when you finish:
Listen 127.0.0.1:80 
With this directive set to the IP address of the localhost, Apache will listen only for connections
from the local host. If you want the web server to listen for connections from remote hosts, you
would use the host's external IP address.


The DocumentRoot directive specifies the location of the HTML files that make up the pages of the 
website.That line does not need to be changed because it already points to the standard location. 
The line should look like this:
DocumentRoot "/var/www/html"
If you wanted to change the location where the website files are stored, this configuration item
is used to do that. For example, you might want to use a different name for the www subdirectory
to make the identification of the website more explicit. That might look like this:
DocumentRoot "/var/mywebsite/html"



Note:
These are the only Apache configuration changes needed to create a simple website. For this little
exercise, only one change was made to the httpd.conf file—the Listen directive. Everything else is
already configured to produce a working web server.
One other change is needed, however: opening port 80 in our firewall. I use iptables as my
firewall, so I change /etc/sysconfig/iptables to add a statement that allows HTTP protocol. 
The entire file looks like this:

# sample configuration for iptables service
# you can edit this manually or use system-config-firewall
# please do not ask us to add additional ports/services to this default configuration
*filter
:INPUT ACCEPT [0:0]
:FORWARD ACCEPT [0:0]
:OUTPUT ACCEPT [0:0]
-A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT
-A INPUT -p icmp -j ACCEPT
-A INPUT -i lo -j ACCEPT
-A INPUT -p tcp -m state --state NEW -m tcp --dport 22 -j ACCEPT
-A INPUT -p tcp -m state --state NEW -m tcp --dport 80 -j ACCEPT
-A INPUT -j REJECT --reject-with icmp-host-prohibited
-A FORWARD -j REJECT --reject-with icmp-host-prohibited
COMMIT

The line I added is the third from the bottom, which allows incoming traffic on port 80. Now I 
reload the altered iptables configuration.
[root@testvm1 ~]# cd /etc/sysconfig/ ; iptables-restore iptables

Note2:
whenever change is made to the /etc configuration file, we need to restart the server
service httpd restart
service httpd start
service httpd status
service httpd stop

you can use text mode web browser like Lynx to view the web page.First,install Lynx (if it is not already installed).
[root@testvm1 ~]# dnf -y install lynx
Then use the following command to display the web page
[root@testvm1 ~]# lynx localhost



Proxy pass
redirection of urls in apache webserver, edit httpd.config

ProxyPass "/mirror/foo/" "http://backend.example.com/"

RewriteRule ^/it/it(|/|/index.htm|)$           https://it.hays-careers.com   [NC,R=301,L] 


Request goes to www.olddomain.com/foo/test.html
Your apache will rewrite this to www.newdomain.com/bar/test.html
It will request this page from the responsible web server
Return the result to the browser as www.olddomain.com/foo/test.html



The load balancer distributes incoming application traffic across multiple targets, such as EC2 instances, 
in multiple Availability Zones. This increases the availability of your application. You add one or more listeners
to your load balancer.
Go through the link https://blog.rackspace.com/aws-101-regions-availability-zones
target group is used to route requests to one or more registered targets. 

step1: Select a Load Balancer Type
------

step2:
------
Define Your Load Balancer such as a name,a network (select the same network that you selected for your instances
EC2-Classic or a specific VPC.),and a listener.
1.A listener is a process that checks for connection requests.It is configured with a protocol and a port for 
front-end (client to load balancer) connections and a protocol and a port for back-end (load balancer to instance)
connections.
HTTP  80
The rules that you define for a listener determine how the load balancer routes requests to the targets in one or more target groups.
For Application Load balancer IF and THEN rules will be exist
url consist of following components
protocol://hostname:port/path?query
protocol:
The protocol (HTTP or HTTPS). You can redirect HTTP to HTTP, HTTP to HTTPS, and HTTPS to HTTPS. You cannot redirect HTTPS to HTTP.
hostname:
The hostname. A hostname is case-insensitive, can be up to 128 characters in length, and consists of alpha-numeric characters,
wildcards (* and ?), and hyphens (-).
port:
The port (1 to 65535).
path:
The absolute path, starting with the leading "/". A path is case-sensitive, can be up to 128 characters in length, and consists of 
alpha-numeric characters, wildcards (* and ?), & (using &amp;), and the following special characters: _-.$/~"'@:+.
Query:
The query parameters.

2.[EC2-VPC] For Available subnets, select at least one available public subnet.To improve the availability of your
load balancer, select more than one public subnet. You can add at most one subnet per Availability Zone.If you 
select a subnet from an Availability Zone where there is already an selected subnet, this subnet replaces the
currently selected subnet for the Availability Zone.
for picture Go through https://docs.aws.amazon.com/elasticloadbalancing/latest/classic/elb-getting-started.html

step3:  Assign Security Groups to Your Load Balancer in a VPC
------
Assign Security Groups to Your Load Balancer in a VPC
1.If you selected a VPC as your network, you must assign your load balancer a security group that allows inbound
traffic to the ports that you specified for your load balancer and the health checks for your load balancer.
If you want to create a new security group, that contains a rule that allows traffic to the port that you configured
your load balancer to use.
HTTP 80

step4: Configure Health Checks for Your EC2 Instances
------
Elastic Load Balancing automatically checks the health of the EC2 instances for your load balancer.If Elastic
Load Balancing finds an unhealthy instance, it stops sending traffic to the instance and reroutes traffic to 
healthy instances. In this step, you customize the health checks for your load balancer.
1.leave Ping Protocol set to HTTP and Ping Port set to 80.
2.For Ping Path, replace the default value with a single forward slash ("/"). This tells Elastic Load Balancing 
to send health check queries to the default home page for your web server, such as index.html.
3.For Advanced Details, leave the default values.
4.Choose Next: Add EC2 Instances.

step5: Register EC2 Instances with Your Load Balancer
------
Your load balancer distributes traffic between the instances that are registered to it.
1.On the Add EC2 Instances page, select the instances to register with your load balancer.
2.Leave cross-zone load balancing and connection draining enabled.
3.Choose Next: Add Tags.








Regions and AvailabilityZones
Each Region is completely independent. Each Availability Zone is isolated, but the Availability Zones in a Region
are connected through low-latency links

An availability zone is a logical data center in a region available for use by any AWS customer. Each zone in a 
region has redundant and separate power, networking and connectivity to reduce the likelihood of two zones failing
simultaneously.
A common misconception is that a single zone equals a single data center. In fact, each zone is backed by one or
more physical data centers, with the largest backed by five.
In each zone, participating data centers are connected to each other over redundant low-latency private network 
links. Likewise, all zones in a region communicate with each other over redundant private network links. These 
intra and inter-zone links are heavily used for data replication by a number of AWS services including storage
and managed databases.
For picture, go through the below link
https://blog.rackspace.com/aws-101-regions-availability-zones

An Availability Zone is represented by a Region code followed by a letter identifier; for example, us-east-1a.
For example, the Availability Zone us-east-1a for your AWS account might not be the same location as us-east-1a for another AWS account.

When you launch an instance, select a Region that puts your instances closer to specific customers, or meets the
legal or other requirements you have.By launching your instances in separate/multiple Availability Zones, you can protect
your applications from the failure of a single location.

When you launch an instance, you can select an Availability Zone or let us choose one for you. If you distribute
your instances across multiple Availability Zones and one instance fails, you can design your application so that
an instance in another Availability Zone can handle requests.
You can also use Elastic IP addresses to mask the failure of an instance in one Availability Zone by rapidly
remapping the address to an instance in another Availability Zone.

Note:
Some AWS resources might not be available in all Regions and Availability Zones. Ensure that you can create the
resources you need in the desired Regions or Availability Zone before launching an instance in a specific Availability Zone.


To find your Regions and Availability Zones using the AWSCLI command line
AWSCLI is the command line interface for AWS.
aws ec2 describe-regions    // describes the Regions for your account
aws ec2 describe-availability-zones --region region-name // describes the Availability Zones within the specified Region.



How to install AWSCLI on Linux
prerequisetes:
Python 2 version 2.6.5+ or Python 3 version 3.3+
python --version  or python3 --version
pip --version
which python
output: /usr/local/bin/python

yum install python-pip -y
pip install awscli 











